/*version: 0.1.4*/
const H=["min_width","min_height","background_color","background_image","background_position","background_repeat","background_size","background_attachment","_webkite_background_size","aspect_ratio","border_right","border_left","border_top","border_bottom","border_radius","border_style","margin_top","margin_bottom","margin_right","margin_left","align_items","text_align","justify_content","justify_items","text_justify","object_fit","font_size","font_family","box_sizing","scrollbar_width","user_select","_ms_user_select","_webkit_user_select","_moz_user_select","box_shadow","_webkit_box_shadow","_moz_box_shadow","no_repeat","border_box","space_between","flex_direction","inter_word"],A=["readonly"],K=["html","body","div","span","p","textarea","field"];function l(e){return H.includes(e)?e.replaceAll("_","-"):e}function M(e){return S(T,e[0])}function m(e){if(M(e))return e;{let t="",r=0;for(;r<e.length;){switch(e[r]){case"\u0660":t+="0";break;case"\u0661":t+="1";break;case"\u0662":t+="2";break;case"\u0663":t+="3";break;case"\u0664":t+="4";break;case"\u0665":t+="5";break;case"\u0666":t+="6";break;case"\u0667":t+="7";break;case"\u0668":t+="8";break;case"\u0669":t+="9";break;case",":t+=".";break;default:_()}r+=1}return t}}function g(e){return e instanceof Array}function S(e,t){return e.includes(t)}function p(e,t){let r=[];return JSON.stringify(e,(s,i)=>{if(i&&typeof i=="object"){if(r.includes(i))return"[CIRCULAR]";r.push(i)}return i})}function _(e){throw new Error(e)}function Q(e,t){return e.repeat(t)}const T=["0","1","2","3","4","5","6","7","8","9"],V=[],Y=["min_width","min_height","background_color","background_image","background_position","background_repeat","background_size","background_attachment","_webkite_background_size","aspect_ratio","border_right","border_left","border_top","border_bottom","border_radius","border_style","margin_top","margin_bottom","margin_right","margin_left","align_items","text_align","justify_content","justify_items","text_justify","object_fit","font_size","font_family","box_sizing","scrollbar_width","user_select","_ms_user_select","_webkit_user_select","_moz_user_select","box_shadow","_webkit_box_shadow","_moz_box_shadow","no_repeat","border_box","space_between","flex_direction","inter_word"],C=["readonly"],Z=["html","body","div","span","p","textarea","field"];function d(e){return Y.includes(e)?e.replaceAll("_","-"):e}function O(e,t){switch(e.id){case"call":let r=e.v[0].v.v[1],s=e.v[1]||[],i=e.v[2]||[];if(r==="br")return t+="<br>";switch(r){case"select":t=ee(s,t)+"} ";break;case"font_face":t=re(s,t);break;case"keyframes":t=se(s,i,t);break;default:t+=`<${r}`,s.forEach((n,a)=>{if(a===0&&n.id==="str")t+=` id='${n.v.v[1]}'`;else if(n.id==="named_arg"){const o=n.v[0].v[1];if(C.includes(o))t+=` ${o} `;else if(t+=` ${o}= `,n.v[1].id==="str")t+=`'${n.v[1].v.v[1]}'`;else if(n.v[1].id==="int"||n.v[1].id==="float"){const c=n.v[1].v[0].v[1],u=n.v[1].v[1].v[1]||"";t+=`${c}${u}`}else n.v[1].id==="bool"?t+=`${o}`:_("not supported: "+p(n))}else _("not supported: "+p(n))}),t+=">",i.forEach(n=>{t=O(n,t)}),t+=`</${r}>`}break;case"str":t+=e.v.v[1];break;default:_("unknown html element: "+p(e))}return t}function ee(e,t){return e.forEach(r=>{const s=d(r.v[0].v[1]),i=r.v[1];s==="element"?(t=te(i,t),t+=" {"):(t+=`${s} : `,t=v(i,t),t+="; ")}),t}function te(e,t){return g(e.v)?(t+=" ",e.v.forEach((r,s)=>{t+=`${r.v.v[1]} `,s<e.v.length-1&&(t+=",")})):t+=` ${e.v.v[1]}`,t}function v(e,t){switch(e.id){case"int":case"float":const r=e.v[0].v[1],s=e.v[1]&&e.v[1].v[1]||"";t+=r+s;break;case"prefix":t+=e.v.op.v,t=v(e.v.opr,t);break;case"postfix":t=v(e.v.opr,t),t+=e.v.op.v;break;case"str":t+=e.v.v[1];break;case"ref":t+=d(e.v.v[1]);break;case"tuple":e.v.forEach(c=>{t=v(c,t+" ")});break;case"call":const i=e.v[0].v.v[1],n=e.v[1];t+=` ${i}(`,n.forEach(c=>{t=v(c,t)}),t+=")";break;case"bin":const a=new JSGen;a.init(),a.write_expr(e);const o=a.get_code();pprint(o),t+="${"+o+"}".trim();break;default:_(`not supported: html generations:  ${p(e)}`)}return t}function re(e,t){return t+="@font-face { ",t=write_ar_css(e,t),t+="}",t}function se(e,t,r){return r+=` @keyframes ${e[0].v.v[1]} { `,t&&t.forEach(s=>{const i=s.v[0].v.v[1],n=s.v[1];switch(i){case"at":const a=n[0],o=n[1].v||[];r=v(a,r),r+=" {",o.forEach(c=>{if(c.id==="named_tuple")c.v.forEach(u=>{const h=d(u[0].v[1]),k=u[1];r+=` ${h} : `,r=v(k,r),r+="; "});else{const u=d(c[0].v[1]),h=c[1];r+=` ${u} : `,r=v(h,r),r+="; "}}),r+="} ";break;default:_("unsupported element: "+p(i))}}),r+="}",r}const $={\u0635\u0641\u062D\u0629_\u0627\u0644\u0634\u0628\u0643\u0629:"html",\u0631\u0627\u0633:"head",\u0646\u0633\u0642:"style",\u0645\u062A\u0646:"body",\u0645\u0646\u0637\u0642\u0629_\u0627\u0644\u0646\u0635:"textarea",\u0639\u0646\u0648\u0627\u0646_\u0631\u0627\u0633\u064A\u0663:"h3",\u0642\u0633\u0645:"div",\u0633\u0637\u0631:"br"},N=e=>{switch(e){case"\u0635\u0646\u0641":return"class";case"\u0627\u0639\u0645\u062F\u0629":return"cols";case"\u0635\u0641\u0648\u0641":return"rows";case"\u0644\u0644\u0642\u0631\u0627\u0621\u0629_\u0641\u0642\u0637":return"readonly";default:return e}},J={\u062D\u0648\u0645:"hover"},ne=e=>{switch(e){case"\u0639\u0646\u062F":return"at";case"\u0627\u0632\u0627\u062D\u0629_\u0633":return"translateX";case"\u0639\u0646\u0648\u0627\u0646":return"url";default:return e}},L=e=>{switch(e){case"\u0639_\u0635":return"px";case"\u0639_\u0637":return"vh";case"\u0645_\u062C":return"rem";case"\u062B":return"s";case"\u066A":return"%";default:return e}},E=e=>{switch(e){case"\u0639\u0646\u0635\u0631":return"element";case"\u0639\u0631\u0636":return"width";case"\u0627\u062F\u0646\u0649_\u0639\u0631\u0636":return"min_width";case"\u0627\u0631\u062A\u0641\u0627\u0639":return"height";case"\u0627\u062F\u0646\u0649_\u0627\u0631\u062A\u0641\u0627\u0639":return"min_height";case"\u0644\u0648\u0646":return"color";case"\u0627\u062A\u062C\u0627\u0647":return"direction";case"\u062E\u0644\u0641\u064A\u0629":return"background";case"\u0644\u0648\u0646_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"background_color";case"\u0635\u0648\u0631\u0629_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"background_image";case"\u0645\u0648\u0642\u0639_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"background_position";case"\u062A\u0643\u0631\u0627\u0631_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"background_repeat";case"\u0627\u0631\u0641\u0627\u0642_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"background_attachment";case"\u0645\u0644\u0627\u0626\u0645\u0629_\u0627\u0644\u0639\u0646\u0635\u0631":return"object_fit";case"\u062D\u062C\u0645_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"background_size";case"_\u0622\u0628\u0644_\u062D\u062C\u0645_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"_webkite_background_size";case"\u0641\u0627\u0626\u0636":return"overflow";case"\u0639\u062A\u0627\u0645\u0629":return"opacity";case"\u0627\u0638\u0647\u0627\u0631":return"display";case"\u0647\u0627\u0645\u0634":return"margin";case"\u0647\u0627\u0645\u0634_\u0639\u0644\u0648\u064A":return"margin_top";case"\u0647\u0627\u0645\u0634_\u0633\u0641\u0644\u064A":return"margin_bottom";case"\u0647\u0627\u0645\u0634_\u0627\u064A\u0645\u0646":return"margin_right";case"\u0647\u0627\u0645\u0634_\u0627\u064A\u0633\u0631":return"margin_left";case"\u0628\u0637\u0627\u0646\u0629":return"padding";case"\u062A\u062D\u062C\u064A\u0645_\u0627\u0644\u0635\u0646\u062F\u0648\u0642":return"box_sizing";case"\u0636\u0628\u0637_\u0627\u0644\u0645\u062D\u062A\u0648\u0649":return"justify_content";case"\u0636\u0628\u0637_\u0627\u0644\u0639\u0646\u0627\u0635\u0631":return"justify_items";case"\u0636\u0628\u0637_\u0627\u0644\u0646\u0635":return"text_justify";case"\u0645\u062D\u0627\u0630\u0627\u0629_\u0627\u0644\u0639\u0646\u0627\u0635\u0631":return"align_items";case"\u0645\u062D\u0627\u0630\u0627\u0629_\u0627\u0644\u0646\u0635":return"text_align";case"\u062D\u062C\u0645_\u0627\u0644\u062E\u0637":return"font_size";case"\u0641\u0635\u064A\u0644\u0629_\u0627\u0644\u062E\u0637":return"font_family";case"\u0641\u062C\u0648\u0629":return"gap";case"\u062D\u062F\u0648\u062F":return"border";case"\u0642\u0637\u0631_\u0627\u0644\u062D\u062F\u0648\u062F":return"border_radius";case"\u0646\u0633\u0642_\u0627\u0644\u062D\u062F\u0648\u062F":return"border_style";case"\u062D\u062F\u0648\u062F_\u062E\u0627\u0631\u062C\u064A\u0629":return"outline";case"\u0645\u0648\u0636\u0639":return"position";case"\u062A\u062D\u0631\u064A\u0643":return"animation";case"\u062A\u062D\u0648\u0644":return"transform";case"\u0627\u0639\u0627\u062F\u0629_\u062A\u062D\u062C\u064A\u0645":return"resize";case"\u0645\u0635\u062F\u0631":return"src";case"\u0646\u0633\u0628\u0629_\u0633_\u0635":return"aspect_ratio";case"\u0645\u0631\u0646_\u0628\u0627\u062A\u062C\u0627\u0647":return"flex_direction";case"\u0634\u0631\u064A\u0637_\u0627\u0644\u062A\u0645\u0631\u064A\u0631_\u0639\u0631\u0636":return"scrollbar_width";case"\u0642\u062F\u0631\u0629_\u0627\u062E\u062A\u064A\u0627\u0631_\u0627\u0644\u0646\u0635":return"user_select";case"_\u0645\u0627\u064A\u0643\u0631\u0648\u0633\u0648\u0641\u062A_\u0642\u062F\u0631\u0629_\u0627\u062E\u062A\u064A\u0627\u0631_\u0627\u0644\u0646\u0635":return"_ms_user_select";case"_\u0622\u0628\u0644_\u0642\u062F\u0631\u0629_\u0627\u062E\u062A\u064A\u0627\u0631_\u0627\u0644\u0646\u0635":return"_webkit_user_select";case"_\u0645\u0648\u0632\u064A\u0644\u0627_\u0642\u062F\u0631\u0629_\u0627\u062E\u062A\u064A\u0627\u0631_\u0627\u0644\u0646\u0635":return"_moz_user_select";case"\u062E\u064A\u0627\u0644_\u0627\u0644\u0635\u0646\u062F\u0648\u0642":return"box_shadow";case"_\u0622\u0628\u0644_\u062E\u064A\u0627\u0644_\u0627\u0644\u0635\u0646\u062F\u0648\u0642":return"_webkit_box_shadow";case"_\u0645\u0648\u0632\u064A\u0644\u0627_\u062E\u064A\u0627\u0644_\u0627\u0644\u0635\u0646\u062F\u0648\u0642":return"_moz_box_shadow";default:return e}},y=e=>{switch(e){case"\u062A\u0644\u0642\u0627\u0626\u064A":return"auto";case"\u062D\u062F\u0648\u062F_\u0627\u0644\u0635\u0646\u062F\u0648\u0642":return"border_box";case"\u0628\u0644\u0627_\u0642\u064A\u0645\u0629":return"none";case"\u0645\u0637\u0644\u0642":return"absolute";case"\u0645\u0631\u0646":return"flex";case"\u0645\u062E\u0641\u064A":return"hidden";case"\u0645\u0631\u0643\u0632":return"center";case"\u0645\u0633\u0627\u0641\u0629_\u0628\u064A\u0646":return"space_between";case"\u0628\u062F\u0627\u064A\u0629":return"start";case"\u0646\u0647\u0627\u064A\u0629":return"end";case"\u0628\u0627\u0631\u0632":return"ridge";case"\u0644\u0627_\u0646\u0647\u0627\u064A\u0629":return"infinite";case"\u0644\u0627_\u062A\u0643\u0631\u0627\u0631":return"no_repeat";case"\u0627\u062D\u062A\u0648\u0627\u0621":return"contain";case"\u0642\u0637\u0639":return"clip";case"\u0636\u0639\u0641":return"double";case"\u0636\u0628\u0637":return"justify";case"\u0628\u064A\u0646_\u0627\u0644\u0643\u0644\u0645\u0627\u062A":return"inter_word";case"\u0645\u0647\u0645":return"important";case"\u063A\u064A\u0631_\u0645\u0647\u0645":return"!important";case"\u0645\u062B\u0628\u062A":return"fixed";case"\u0645\u0646_\u0627\u0644\u064A\u0645\u064A\u0646":return"rtl";case"\u0639\u0645\u0648\u062F\u064A":return"column";case"\u0627\u0641\u0642\u064A":return"row";case"\u0633\u0645\u0627\u0648\u064A_\u0641\u0627\u062A\u062D":return"lightskyblue";case"\u0627\u0628\u064A\u0636":return"white";case"\u0627\u0635\u0641\u0631":return"yellow";case"\u0627\u0633\u0648\u062F":return"black";case"\u0628\u0631\u062A\u0642\u0627\u0644\u064A":return"orange";default:return e}},ie=e=>{switch(e){case"\u0645\u062A\u0646":return"body";case"\u0635\u0641\u062D\u0629_\u0627\u0644\u0634\u0628\u0643\u0629":return"html";default:return e}};function R(e,t){switch(e.id){case"call":const r=e.v[0].v.v[1],s=$[r]||r,i=e.v[1]||[],n=e.v[2]||[];if(s==="br")return t+="<br>";switch(s){case"\u0627\u062E\u062A\u0631":t=I(i,t)+"} ";break;case"\u0639\u0631\u0641_\u062E\u0637":t=ce(i,t);break;case"\u0627\u0637\u0627\u0631\u0627\u062A_\u0631\u0626\u064A\u0633\u064A\u0629":t=oe(i,n,t);break;default:t+=`<${s}`,Z.includes(s)&&(t+=" dir='rtl'"),i.forEach((a,o)=>{if(o===0&&a.id==="str")t+=` id='${a.v.v[1]}'`;else if(a.id==="named_arg"){const c=N(a.v[0].v[1]);if(C.includes(c))t+=` ${c} `;else if(t+=` ${c}= `,a.v[1].id==="str")t+=`'${a.v[1].v.v[1]}'`;else if(a.v[1].id==="int"||a.v[1].id==="float"){const u=m(a.v[1].v[0].v[1]),h=a.v[1].v[1]&&L(a.v[1].v[1].v[1])||"";t+=`${u}${h}`}else a.v[1].id==="bool"?t+=`${N(c)}`:_("not supported: "+p(a))}else _("not supported: "+p(a))}),t+=">",n.forEach(a=>{t=R(a,t)}),t+=`</${s}>`}break;case"str":t+=e.v.v[1];break;default:_("unknown html element: "+p(e))}return t}function I(e,t){return e.forEach(r=>{const s=d(E(r.v[0].v[1])),i=r.v[1];s==="element"?(t=ae(i,t),t+=" {"):(t+=`${s} : `,t=f(i,t),t+="; ")}),t}function ae(e,t){const r=s=>{const i=n=>RegExp(`(?<![p{L}\\p{N}_])${n}(?![\\p{L}\\p{N}_])`,"ug");return Object.keys($).forEach(n=>{s=s.replaceAll(i(n),$[n])}),Object.keys(J).forEach(n=>{s=s.replaceAll(i(n),J[n])}),s};if(g(e.v))t+=" ",e.v.forEach((s,i)=>{let n=s.v.v[1];t+=r(n),i<e.v.length-1&&(t+=",")});else{const s=e.v.v[1];t+=r(s)}return t}function f(e,t){switch(e.id){case"bool":_();break;case"int":case"float":const r=m(e.v[0].v[1]),s=L(e.v[1]&&e.v[1].v[1])||"";t+=r+s;break;case"prefix":t+=e.v.op.v,t=f(e.v.opr,t);break;case"postfix":t=f(e.v.opr,t),t+=e.v.op.v;break;case"str":t+=ie(e.v.v[1]);break;case"ref":t+=d(y(e.v.v[1]));break;case"tuple":e.v.forEach(c=>{t=f(c,t+" ")});break;case"call":const i=ne(e.v[0].v.v[1]),n=e.v[1];t+=` ${i}(`,n.forEach(c=>{t=f(c,t)}),t+=")";break;case"bin":const a=new G;a.init(),a.write_expr(e);const o=a.get_code();t+="${"+o+"}".trim();break;default:_(`not supported: html generations:  ${p(e)}`)}return t}function ce(e,t){return t+="@font-face { ",t=I(e,t),t+="}",t}function oe(e,t,r){return r+=` @keyframes ${e[0].v.v[1]} { `,t&&t.forEach(s=>{const i=s.v[0].v.v[1],n=y(s.v[1]);switch(i){case"\u0639\u0646\u062F":const a=n[0],o=n[1].v||[];r=f(a,r),r+=" {",o.forEach(c=>{if(c.id==="named_tuple")c.v.forEach(u=>{const h=d(E(u[0].v[1])),k=y(u[1]);r+=` ${h} : `,r=f(k,r),r+="; "});else{const u=d(E(c[0].v[1])),h=y(c[1]);r+=` ${u} : `,r=f(h,r),r+="; "}}),r+="} ";break;default:_("unsupported element: "+p(i))}}),r+="}",r}const U={\u0628\u062F\u0621:"main",\u0627\u0637\u0628\u0639_\u0633\u0637\u0631:"println",\u062A\u0639\u0628\u064A\u0631_\u0646\u0645\u0637\u064A:"regex",\u0647\u0630\u0627:"this",\u0645\u0634\u064A\u0651\u062F:"constructor",\u0627\u0646\u0647\u0627\u0621:"panic"},_e=4;let G=class{current;indent_level;stack;astructs;ast;main_args;opts;constructor(e,t,r,s,i,n){return this.current=e,this.indent_level=t,this.stack=r,this.astructs=s,this.ast=i,this.opts=n,this}init(e,t,r){this.current="",this.indent_level=0,this.stack=[],this.astructs=[],this.ast=e,this.main_args=t,this.opts=r}run(){this.strict_mode();let e,t=0;for(;t<this.ast.length;){const r=this.ast[t];if(r){const s=r.v;switch(r.id){case"use":this.write_use(s);break;case"modif":this.write_modifier(s);break;case"main":e=s;break;case"const":this.write_const(s);break;case"fn":this.write_fn(s);break;case"type":this.write_typedef(s);break;default:_("unsupported node: "+this.ast[t].id)}}t+=1}return this.write_helper_fns(),e&&this.write_main(e),this.get_code()}to_en_id(e){!e.v&&!g(e.v)||U[e.v[1]]&&(e.v[1]=U[e.v[1]])}push(){this.stack.push(this.current),this.current=""}pop(){this.current=this.stack.pop()+this.current}pop_prepend(){this.current=this.current+this.stack.pop()}append(e){this.current+=e}appendi(e){this.current+=this.spaces(),this.current+=e}spaces(e){return e||(e=this.indent_level),Q(" ",e*_e)}strict_mode(){this.append(`"use strict";

`)}write_id_pat(e){const t=e.v.v[1];this.append(t==="_"?"default":t)}write_char_pat(e){this.append("'"+e.v.v[1]+"'")}write_str_pat(e){this.append('"'+e.v.v[1]+'"')}write_tuple_pat(e){this.append("(");let t=0;for(;t<e.v.length;)this.write_pat(e.v[t]),t<e.v.length-1&&this.append(", "),t+=1;this.append(")")}write_pat(e){switch(e.id){case"id":this.write_id_pat(e);break;case"bool":this.append(e.v.v[1]);break;case"int":case"float":this.append(m(e.v.v[1][0]));break;case"char":this.write_char_pat(e);break;case"str":this.write_str_pat(e);break;case"tuple":this.write_tuple_pat(e);break;case"_":this.append("default");break;default:_("unsupported pattern "+p(e))}}write_modifier(e){this.opts.ignore_export||e.v==="+"&&this.appendi("export ")}write_use(e){}write_main(e){this.push(),this.appendi("("),this.write_fn(e,this.main_args),this.appendi(`)()
`),this.pop()}write_params(e){this.append("(");let t=0;for(;t<e.length;)t>0&&this.append(", "),this.write_pat(e[t].v._pat),t+=1;this.append(")")}write_do_block(e){this.append("(()=>"),this.write_block(e),this.append(`)() 
`)}write_block(e){this.append(` {
`),this.push(),this.indent_level+=1;let t=0;const r=e.v.length;for(;t<r;){const s=e.v[t];this.write_stmt(s),t+=1}this.pop(),this.indent_level-=1,this.appendi(`}
`)}write_fn(e,t){this.push(),e.t==="fn"&&this.appendi("static "),this.to_en_id(e.name),this.append("function "+e.name.v[1]),t?this.append("()"):this.write_params(e.params),this.write_body(e.body,e.name==="main",t),this.pop()}write_fields(e){const t=[];e.forEach(r=>{const s=r.v[0].v[1];t.push(s)}),t.forEach(r=>{this.appendi(this.spaces()+""+r+`
`)}),this.write_init(t)}write_init(e){this.append(`
`),this.appendi("constructor(");let t=0;for(;t<e.length;)this.append(e[t]),t<e.length-1&&this.append(", "),t+=1;for(this.append(`) {
`),this.indent_level+=1,t=0;t<e.length;)this.appendi("this."+e[t]+" = "+e[t]+`
`),t+=1;this.appendi(`return this
`),this.indent_level-=1,this.appendi(`}
`)}write_typedef(e){this.appendi("class "+e.name.v[1]+` {
`),this.indent_level+=1,e.fields&&this.write_fields(e.fields),this.indent_level-=1,this.appendi(`}

`)}write_const(e){this.appendi("const "),this.write_pat(e.lhs),this.append(" = "),this.write_expr(e.rhs),this.append(`
`)}write_var(e){this.appendi("let "),this.write_pat(e.lhs),e.rhs&&(this.append(" = "),this.write_expr(e.rhs)),this.append(`
`)}write_ret(e){this.append("return "),e.v&&this.write_expr(e.v)}write_break(e){this.append("break")}write_stmt(e){e.t==="expr"?(this.appendi(""),this.write_expr(e),this.append(`
`)):e.id==="const"?this.write_const(e.v):e.id==="var"?this.write_var(e.v):e.id==="break"?this.write_break(e):_("cannot write stmt: "+p(e))}write_body(e,t,r){if(this.append(` {
`),this.push(),this.indent_level+=1,r)for(const[n,a]of Object.entries(r))this.append(`const ${n} = '${a}'
`);let s=0;const i=e.v.length;for(;s<i;){const n=e.v[s];this.write_stmt(n),s+=1}this.pop(),this.indent_level-=1,this.appendi(`}
`)}write_id(e){this.append(e.v[1])}write_ref(e){const t=e.v.v[1];this.append(t)}write_str(e){const t=e.v.v[1],r=t.indexOf("${")===-1?'"':"`";this.append(r+t+r)}write_str_id(e){this.append(symbol+e.v.v[1]+symbol)}is_call(e){return e.v.id==="bin"&&e.v.v.op.v==="("}write_iret(e){S(["when","while","if","for","return"],e.v.node)||e.v.t==="()"||this.is_call(e)||e.semicolon||this.append("return "),this.is_call(e)?(this.append("const temp_seen_var = "),this.write_expr(e.v),this.append(`
`),this.append("return temp_seen_var")):this.write_expr(e.v)}write_list(e){this.append("[");let t=0;const r=e.v.length;for(;t<r;)this.write_expr(e.v[t]),t<e.v.length-1&&this.append(", "),t+=1;this.append("]")}write_structl(e){const t=e.v;this.append("{");let r=0;for(;r<t.length;){const s=t[r],i=s.k;i.v.v[1]?this.write_id(i.v):this.write_str_id(i.v);const n=s.v;this.append(": "),this.write_expr(n),r<t.length-1&&this.append(", "),r+=1}this.append("}")}write_args(e){this.append("(");let t=0;for(;t<e.v.length;){let r=e.v[t];r.v.op&&r.v.op.v===":"&&(r=r.v.ropr),this.write_expr(r),t<e.v.length-1&&this.append(", "),t+=1}this.append(")")}write_named_arg(e){e.v[0].v[1];const t=e.v[1];this.write_expr(t)}write_tuple(e){this.append("[");let t=0;for(;t<e.v.length;){let r=e.v[t];r.id==="narg"&&(r=e.v[t].v[1]),this.write_expr(r),t<e.v.length-1&&this.append(", "),t+=1}this.append("]")}write_named_tuple(e){this.append("{"),e.v.forEach((t,r)=>{const s=t[0].v[1],i=t[1];this.append(s),this.append(": "),this.write_expr(i),r<e.v.length&&this.append(",")}),this.append("}")}write_when(e){this.appendi("switch("),this.write_expr(e.v.expr),this.append(`) {
`),this.indent_level+=1;let t=0;for(;t<e.v.arms.length;){const r=e.v.arms[t],s=r.v.pats,i=r.v.expr;let n=0;for(;n<s.length;)s[n].id!=="_"&&this.appendi("case "),this.write_pat(s[n]),this.append(` :
`),n+=1;this.indent_level+=1,this.appendi(""),this.write_expr(i),this.append(`
`),this.appendi(`break
`),this.indent_level-=1,t+=1}this.indent_level-=1,this.appendi(`}
`)}write_prefix_uni(e){const t=e.v.op.v;switch(t){case".":if(e.v.opr.v.v[1]==="none"){this.append("null");return}else _("enum variants are not supported, found : (."+e.v.opr.v.v[1]+")");break;case"not":this.append("!");break;case"!":case"-":this.append(t);break;default:_("unsupported op: "+t);break}this.write_expr(e.v.opr)}write_pipe(e){for(;e.length>0;){let t=e.pop();switch(t.id){case"ref":this.write_expr(t),e.length>0&&(this.append("("),this.write_pipe(e),this.append(")"));break;case"call":const r=t.v[0],s=t.v[1];this.write_expr(r),this.append("("),this.write_pipe(e),this.current.slice(-1)!=="("&&s.length>0&&this.append(", "),s.forEach((i,n)=>{this.write_expr(i),n<s.length-1&&this.append(", ")}),this.append(")");break;case"int":case"float":case"str":case"[":case"tuple":case"named_tuple":this.write_expr(t);break;default:throw new Error("syntax error |> :"+p(t))}}}write_call(e){if(this.to_en_id(e.v[0].v),e.v[0].v.v[1]==="html"){const r=O(e,"");this.append(` (() => \`${r}\`)() `);return}else if(e.v[0].v.v[1]==="\u0635\u0641\u062D\u0629_\u0627\u0644\u0634\u0628\u0643\u0629"){const r=R(e,"");this.append(`(() => \`${r}\`)()`);return}else V.includes(e.v[0].v.v[1])&&this.append("new ");this.write_expr(e.v[0]),this.append("(");const t=e.v[1];t&&t.forEach((r,s)=>{this.write_expr(r),s<t.length-1&&this.append(", ")}),e.v[2]&&(t&&this.append(", "),this.write_children(e.v[2])),this.append(")")}write_children(e){!e||e.length===0||(this.append("["),e.forEach(t=>{this.write_expr(t),this.append(",")}),this.append("]"))}write_bin(e){const t=e.v.op.v;switch(t){case"[":this.write_expr(e.v.lopr),this.append("["),this.write_expr(e.v.ropr),this.append("]");break;case"=":this.write_expr(e.v.lopr),this.append("="),this.write_expr(e.v.ropr);break;case":=":this.append("let "),this.write_expr(e.v.lopr),this.append(" = "),this.write_expr(e.v.ropr),this.append(`
`);break;case"::":this.appendi("const "),this.write_expr(e.v.lopr),this.append(" = "),this.write_expr(e.v.ropr),this.append(`
`);break;case":":this.appendi("let "),this.write_expr(e.v.lopr),this.append(`
`);break;case"|>":{let r=[],s=e.v.lopr,i=e.v.ropr;for(;;)if(r.push(s),i.id==="bin"&&i.v.op.v==="|>")s=i.v.lopr,i=i.v.ropr;else{r.push(i);break}this.write_pipe(r);break}case"||>":throw new Error(" ||> : WIP , "+p(e));case":>":throw new Error(" :> : WIP , "+p(e));case"==":case"!=":case"<":case"<=":case">":case">=":case"|":case"||":case"&":case"&&":case"+":case"-":case"/":case"*":case"+=":case"-=":case"*=":case"\\=":case".":this.write_expr(e.v.lopr),this.append(t),(t==="=="||t==="!=")&&this.append("="),this.write_expr(e.v.ropr);break;default:_("cannot write binary operation: "+p(e));break}}write_afn(e){this.push(),this.write_params(e.v.params),this.append("=>"),this.write_body(e.v.body),this.pop()}write_expr(e){switch(e.grouped&&this.append("("),e.id){case"()":break;case";":break;case"ref":this.write_ref(e);break;case"bool":this.append(e.v.v[1]);break;case"int":case"float":this.append(m(e.v[0].v[1]));break;case"char":this.append("'"+e.v.v[1]+"'");break;case"str":this.write_str(e);break;case"return":this.write_ret(e);break;case"iret":this.write_iret(e);break;case"[":this.write_list(e);break;case"{":this.write_structl(e);break;case"args":this.write_args(e);break;case"named_arg":this.write_named_arg(e);break;case"tuple":this.write_tuple(e);break;case"named_tuple":this.write_named_tuple(e);break;case"when":this.write_when(e);break;case"do_block":this.write_do_block(e);break;case"block":this.write_block(e);break;case"prefix":this.write_prefix_uni(e);break;case"call":this.write_call(e);break;case"bin":this.write_bin(e);break;case"afn":this.write_afn(e);break;default:_("cannot write expr: "+p(e))}e.grouped&&this.append(")")}write_helper_fns(){this.append(ue)}get_code(){return this.current}};const ue=`
//------------------------------------------------------------------------------
// js helper functions injected to workaround missing seen features that are yet to be added.
function is_none(x) { return x == null }        
function is_list(x) { return x instanceof Array }
function replace(array, i, v) {  array[i] = v }
function to_int(str) { return parseInt(str) }
function assign(x,y) { x = y }
function concat(x,y,id) { x[id] = x[id].concat(y[id]) }
function del(array, i) { delete array[i] }
function regexp(expr) { return RegExp(expr, 'ug') }
function match_regexp(v, expr) {return expr.exec(v) }
function print(v) { throw new Error('print() is not implemeted')}
function \u0627\u0637\u0628\u0639_\u0633\u0637\u0631(v) { println(v) }
function println(v) {         
    if(v == null ) { console.log("undefined") } else { console.log(v) }
}
function panic(v) { throw new Error(v)}
function clone(obj) { return {...obj} }
function contains(list, el) { return list.includes(el) }
function is_empty(list) { return Array.isArray(list) && list.length === 0 }
function \u0627\u0637\u0628\u0639_\u062A\u0641\u0627\u0635\u064A\u0644(obj, indent) { pprint(obj, indent) }
function pprint(obj, indent) { 
    if( obj == null ) {
        console.log("undefined")
    } else {
        if(indent) {
            console.log(JSON.stringify(obj, null, indent)) 
        } else {
            console.log(JSON.stringify(obj)) 
        }       
    }
}
function to_str(obj, indent) { 
let objects = []
function eliminateCircular(k, v) {
    if (v && typeof v === 'object') {
        if (objects.includes(v)) { return "[CIRCULAR]" } else { objects.push(v) }
    }
    return v
}
if(indent) {
    return JSON.stringify(obj, eliminateCircular, indent)
} else {
    return JSON.stringify(obj, eliminateCircular)
}
}
function repeat(str, times) { return str.repeat(times) }
function c0_to_uppercase(str){ return str.charAt(0).toUpperCase() + str.slice(1) }
function to_lowercase(str) {return str.toLowerCase()}
function \u0639\u0631\u0636_\u0627\u0648\u0644\u064A(code, preview_id){ preview(code, preview_id) }
function preview(code, preview_id) { window.parent.document.querySelector(preview_id).srcdoc = code }
function \u0647\u0627\u062A_\u0627\u0644\u0627\u0641\u0631\u0639(\u0633) {
    return \u0633.__children
}
function \u0627\u062E\u062A\u0631(\u0633,\u062F\u0627\u0644\u0629) {
    return \u0633.filter(\u062F\u0627\u0644\u0629)
}
function \u0647\u0627\u062A(\u0642,\u0641\u0647\u0631\u0633) { return \u0642[\u0641\u0647\u0631\u0633]}
function \u0639\u062F\u062F_\u0627\u0644\u0639\u0646\u0627\u0635\u0631(\u0642) { return \u0642.length}
async function read_url(url) {
    const response = await fetch(url);
    return response.text()
}

//------------------------------------------------------------------------------
`;function P(e,t){switch(e.id){case"call":let r=e.v[0].v.v[1],s=e.v[1]||[],i=e.v[2]||[];if(r==="br")return t+="<br>";switch(r){case"select":t=pe(s,t)+"} ";break;case"font_face":t=le(s,t);break;case"keyframes":t=de(s,i,t);break;default:t+=`<${r}`,s.forEach((n,a)=>{if(a===0&&n.id==="str")t+=` id='${n.v.v[1]}'`;else if(n.id==="named_arg"){const o=n.v[0].v[1];if(A.includes(o))t+=` ${o} `;else if(t+=` ${o}= `,n.v[1].id==="str")t+=`'${n.v[1].v.v[1]}'`;else if(n.v[1].id==="int"||n.v[1].id==="float"){const c=n.v[1].v[0].v[1],u=n.v[1].v[1].v[1]||"";t+=`${c}${u}`}else n.v[1].id==="bool"?t+=`${o}`:_("not supported: "+p(n))}else _("not supported: "+p(n))}),t+=">",i.forEach(n=>{t=P(n,t)}),t+=`</${r}>`}break;case"str":t+=e.v.v[1];break;default:_("unknown html element: "+p(e))}return t}function pe(e,t){return e.forEach(r=>{const s=l(r.v[0].v[1]),i=r.v[1];s==="element"?(t=he(i,t),t+=" {"):(t+=`${s} : `,t=b(i,t),t+="; ")}),t}function he(e,t){return g(e.v)?(t+=" ",e.v.forEach((r,s)=>{t+=`${r.v.v[1]} `,s<e.v.length-1&&(t+=",")})):t+=` ${e.v.v[1]}`,t}function b(e,t){switch(e.id){case"int":case"float":const r=e.v[0].v[1],s=e.v[1]&&e.v[1].v[1]||"";t+=r+s;break;case"prefix":t+=e.v.op.v,t=b(e.v.opr,t);break;case"postfix":t=b(e.v.opr,t),t+=e.v.op.v;break;case"str":t+=e.v.v[1];break;case"ref":t+=l(e.v.v[1]);break;case"tuple":e.v.forEach(c=>{t=b(c,t+" ")});break;case"call":const i=e.v[0].v.v[1],n=e.v[1];t+=` ${i}(`,n.forEach(c=>{t=b(c,t)}),t+=")";break;case"bin":const a=new JSGen;a.init(),a.write_expr(e);const o=a.get_code();pprint(o),t+="${"+o+"}".trim();break;default:_(`not supported: html generations:  ${p(e)}`)}return t}function le(e,t){return t+="@font-face { ",t=write_ar_css(e,t),t+="}",t}function de(e,t,r){return r+=` @keyframes ${e[0].v.v[1]} { `,t&&t.forEach(s=>{const i=s.v[0].v.v[1],n=s.v[1];switch(i){case"at":const a=n[0],o=n[1].v||[];r=b(a,r),r+=" {",o.forEach(c=>{if(c.id==="named_tuple")c.v.forEach(u=>{const h=l(u[0].v[1]),k=u[1];r+=` ${h} : `,r=b(k,r),r+="; "});else{const u=l(c[0].v[1]),h=c[1];r+=` ${u} : `,r=b(h,r),r+="; "}}),r+="} ";break;default:_("unsupported element: "+p(i))}}),r+="}",r}const j={\u0635\u0641\u062D\u0629_\u0627\u0644\u0634\u0628\u0643\u0629:"html",\u0631\u0627\u0633:"head",\u0646\u0633\u0642:"style",\u0645\u062A\u0646:"body",\u0645\u0646\u0637\u0642\u0629_\u0627\u0644\u0646\u0635:"textarea",\u0639\u0646\u0648\u0627\u0646_\u0631\u0627\u0633\u064A\u0663:"h3",\u0642\u0633\u0645:"div",\u0633\u0637\u0631:"br"},W=e=>{switch(e){case"\u0635\u0646\u0641":return"class";case"\u0627\u0639\u0645\u062F\u0629":return"cols";case"\u0635\u0641\u0648\u0641":return"rows";case"\u0644\u0644\u0642\u0631\u0627\u0621\u0629_\u0641\u0642\u0637":return"readonly";default:return e}},X={\u062D\u0648\u0645:"hover"},ve=e=>{switch(e){case"\u0639\u0646\u062F":return"at";case"\u0627\u0632\u0627\u062D\u0629_\u0633":return"translateX";case"\u0639\u0646\u0648\u0627\u0646":return"url";default:return e}},q=e=>{switch(e){case"\u0639_\u0635":return"px";case"\u0639_\u0637":return"vh";case"\u0645_\u062C":return"rem";case"\u062B":return"s";case"\u066A":return"%";default:return e}},z=e=>{switch(e){case"\u0639\u0646\u0635\u0631":return"element";case"\u0639\u0631\u0636":return"width";case"\u0627\u062F\u0646\u0649_\u0639\u0631\u0636":return"min_width";case"\u0627\u0631\u062A\u0641\u0627\u0639":return"height";case"\u0627\u062F\u0646\u0649_\u0627\u0631\u062A\u0641\u0627\u0639":return"min_height";case"\u0644\u0648\u0646":return"color";case"\u0627\u062A\u062C\u0627\u0647":return"direction";case"\u062E\u0644\u0641\u064A\u0629":return"background";case"\u0644\u0648\u0646_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"background_color";case"\u0635\u0648\u0631\u0629_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"background_image";case"\u0645\u0648\u0642\u0639_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"background_position";case"\u062A\u0643\u0631\u0627\u0631_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"background_repeat";case"\u0627\u0631\u0641\u0627\u0642_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"background_attachment";case"\u0645\u0644\u0627\u0626\u0645\u0629_\u0627\u0644\u0639\u0646\u0635\u0631":return"object_fit";case"\u062D\u062C\u0645_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"background_size";case"_\u0622\u0628\u0644_\u062D\u062C\u0645_\u0627\u0644\u062E\u0644\u0641\u064A\u0629":return"_webkite_background_size";case"\u0641\u0627\u0626\u0636":return"overflow";case"\u0639\u062A\u0627\u0645\u0629":return"opacity";case"\u0627\u0638\u0647\u0627\u0631":return"display";case"\u0647\u0627\u0645\u0634":return"margin";case"\u0647\u0627\u0645\u0634_\u0639\u0644\u0648\u064A":return"margin_top";case"\u0647\u0627\u0645\u0634_\u0633\u0641\u0644\u064A":return"margin_bottom";case"\u0647\u0627\u0645\u0634_\u0627\u064A\u0645\u0646":return"margin_right";case"\u0647\u0627\u0645\u0634_\u0627\u064A\u0633\u0631":return"margin_left";case"\u0628\u0637\u0627\u0646\u0629":return"padding";case"\u062A\u062D\u062C\u064A\u0645_\u0627\u0644\u0635\u0646\u062F\u0648\u0642":return"box_sizing";case"\u0636\u0628\u0637_\u0627\u0644\u0645\u062D\u062A\u0648\u0649":return"justify_content";case"\u0636\u0628\u0637_\u0627\u0644\u0639\u0646\u0627\u0635\u0631":return"justify_items";case"\u0636\u0628\u0637_\u0627\u0644\u0646\u0635":return"text_justify";case"\u0645\u062D\u0627\u0630\u0627\u0629_\u0627\u0644\u0639\u0646\u0627\u0635\u0631":return"align_items";case"\u0645\u062D\u0627\u0630\u0627\u0629_\u0627\u0644\u0646\u0635":return"text_align";case"\u062D\u062C\u0645_\u0627\u0644\u062E\u0637":return"font_size";case"\u0641\u0635\u064A\u0644\u0629_\u0627\u0644\u062E\u0637":return"font_family";case"\u0641\u062C\u0648\u0629":return"gap";case"\u062D\u062F\u0648\u062F":return"border";case"\u0642\u0637\u0631_\u0627\u0644\u062D\u062F\u0648\u062F":return"border_radius";case"\u0646\u0633\u0642_\u0627\u0644\u062D\u062F\u0648\u062F":return"border_style";case"\u062D\u062F\u0648\u062F_\u062E\u0627\u0631\u062C\u064A\u0629":return"outline";case"\u0645\u0648\u0636\u0639":return"position";case"\u062A\u062D\u0631\u064A\u0643":return"animation";case"\u062A\u062D\u0648\u0644":return"transform";case"\u0627\u0639\u0627\u062F\u0629_\u062A\u062D\u062C\u064A\u0645":return"resize";case"\u0645\u0635\u062F\u0631":return"src";case"\u0646\u0633\u0628\u0629_\u0633_\u0635":return"aspect_ratio";case"\u0645\u0631\u0646_\u0628\u0627\u062A\u062C\u0627\u0647":return"flex_direction";case"\u0634\u0631\u064A\u0637_\u0627\u0644\u062A\u0645\u0631\u064A\u0631_\u0639\u0631\u0636":return"scrollbar_width";case"\u0642\u062F\u0631\u0629_\u0627\u062E\u062A\u064A\u0627\u0631_\u0627\u0644\u0646\u0635":return"user_select";case"_\u0645\u0627\u064A\u0643\u0631\u0648\u0633\u0648\u0641\u062A_\u0642\u062F\u0631\u0629_\u0627\u062E\u062A\u064A\u0627\u0631_\u0627\u0644\u0646\u0635":return"_ms_user_select";case"_\u0622\u0628\u0644_\u0642\u062F\u0631\u0629_\u0627\u062E\u062A\u064A\u0627\u0631_\u0627\u0644\u0646\u0635":return"_webkit_user_select";case"_\u0645\u0648\u0632\u064A\u0644\u0627_\u0642\u062F\u0631\u0629_\u0627\u062E\u062A\u064A\u0627\u0631_\u0627\u0644\u0646\u0635":return"_moz_user_select";case"\u062E\u064A\u0627\u0644_\u0627\u0644\u0635\u0646\u062F\u0648\u0642":return"box_shadow";case"_\u0622\u0628\u0644_\u062E\u064A\u0627\u0644_\u0627\u0644\u0635\u0646\u062F\u0648\u0642":return"_webkit_box_shadow";case"_\u0645\u0648\u0632\u064A\u0644\u0627_\u062E\u064A\u0627\u0644_\u0627\u0644\u0635\u0646\u062F\u0648\u0642":return"_moz_box_shadow";default:return e}},x=e=>{switch(e){case"\u062A\u0644\u0642\u0627\u0626\u064A":return"auto";case"\u062D\u062F\u0648\u062F_\u0627\u0644\u0635\u0646\u062F\u0648\u0642":return"border_box";case"\u0628\u0644\u0627_\u0642\u064A\u0645\u0629":return"none";case"\u0645\u0637\u0644\u0642":return"absolute";case"\u0645\u0631\u0646":return"flex";case"\u0645\u062E\u0641\u064A":return"hidden";case"\u0645\u0631\u0643\u0632":return"center";case"\u0645\u0633\u0627\u0641\u0629_\u0628\u064A\u0646":return"space_between";case"\u0628\u062F\u0627\u064A\u0629":return"start";case"\u0646\u0647\u0627\u064A\u0629":return"end";case"\u0628\u0627\u0631\u0632":return"ridge";case"\u0644\u0627_\u0646\u0647\u0627\u064A\u0629":return"infinite";case"\u0644\u0627_\u062A\u0643\u0631\u0627\u0631":return"no_repeat";case"\u0627\u062D\u062A\u0648\u0627\u0621":return"contain";case"\u0642\u0637\u0639":return"clip";case"\u0636\u0639\u0641":return"double";case"\u0636\u0628\u0637":return"justify";case"\u0628\u064A\u0646_\u0627\u0644\u0643\u0644\u0645\u0627\u062A":return"inter_word";case"\u0645\u0647\u0645":return"important";case"\u063A\u064A\u0631_\u0645\u0647\u0645":return"!important";case"\u0645\u062B\u0628\u062A":return"fixed";case"\u0645\u0646_\u0627\u0644\u064A\u0645\u064A\u0646":return"rtl";case"\u0639\u0645\u0648\u062F\u064A":return"column";case"\u0627\u0641\u0642\u064A":return"row";case"\u0633\u0645\u0627\u0648\u064A_\u0641\u0627\u062A\u062D":return"lightskyblue";case"\u0627\u0628\u064A\u0636":return"white";case"\u0627\u0635\u0641\u0631":return"yellow";case"\u0627\u0633\u0648\u062F":return"black";case"\u0628\u0631\u062A\u0642\u0627\u0644\u064A":return"orange";default:return e}},B=e=>{switch(e){case"\u0645\u062A\u0646":return"body";case"\u0635\u0641\u062D\u0629_\u0627\u0644\u0634\u0628\u0643\u0629":return"html";default:return e}};function D(e,t){switch(e.id){case"call":const r=e.v[0].v.v[1],s=j[r]||r,i=e.v[1]||[],n=e.v[2]||[];if(s==="br")return t+="<br>";switch(s){case"\u0627\u062E\u062A\u0631":t=F(i,t)+"} ";break;case"\u0639\u0631\u0641_\u062E\u0637":t=be(i,t);break;case"\u0627\u0637\u0627\u0631\u0627\u062A_\u0631\u0626\u064A\u0633\u064A\u0629":t=we(i,n,t);break;default:t+=`<${s}`,K.includes(s)&&(t+=" dir='rtl'"),i.forEach((a,o)=>{if(o===0&&a.id==="str")t+=` id='${a.v.v[1]}'`;else if(a.id==="named_arg"){const c=W(a.v[0].v[1]);if(A.includes(c))t+=` ${c} `;else if(t+=` ${c}= `,a.v[1].id==="str")t+=`'${a.v[1].v.v[1]}'`;else if(a.v[1].id==="int"||a.v[1].id==="float"){const u=m(a.v[1].v[0].v[1]),h=a.v[1].v[1]&&q(a.v[1].v[1].v[1])||"";t+=`${u}${h}`}else a.v[1].id==="bool"?t+=`${W(c)}`:_("not supported: "+p(a))}else _("not supported: "+p(a))}),t+=">",n.forEach(a=>{t=D(a,t)}),t+=`</${s}>`}break;case"str":t+=e.v.v[1];break;default:_("unknown html element: "+p(e))}return t}function F(e,t){return e.forEach(r=>{const s=l(z(r.v[0].v[1])),i=r.v[1];s==="element"?(t=fe(i,t),t+=" {"):(t+=`${s} : `,t=w(i,t),t+="; ")}),t}function fe(e,t){const r=s=>{const i=n=>RegExp(`(?<![p{L}\\p{N}_])${n}(?![\\p{L}\\p{N}_])`,"ug");return Object.keys(j).forEach(n=>{s=s.replaceAll(i(n),j[n])}),Object.keys(X).forEach(n=>{s=s.replaceAll(i(n),X[n])}),s};if(g(e.v))t+=" ",e.v.forEach((s,i)=>{let n=s.v.v[1];t+=r(n),i<e.v.length-1&&(t+=",")});else{const s=e.v.v[1];t+=r(s)}return t}function w(e,t){switch(e.id){case"bool":_();break;case"int":case"float":const r=m(e.v[0].v[1]),s=q(e.v[1]&&e.v[1].v[1])||"";t+=r+s;break;case"prefix":t+=e.v.op.v,t=w(e.v.opr,t);break;case"postfix":t=w(e.v.opr,t),t+=e.v.op.v;break;case"str":t+=B(e.v.v[1]);break;case"ref":t+=l(x(e.v.v[1]));break;case"tuple":e.v.forEach(c=>{t=w(c,t+" ")});break;case"call":const i=ve(e.v[0].v.v[1]),n=e.v[1];t+=` ${i}(`,n.forEach(c=>{t=w(c,t)}),t+=")";break;case"bin":const a=new G;a.init(),a.write_expr(e);const o=a.get_code();t+="${"+o+"}".trim();break;default:_(`not supported: html generations:  ${p(e)}`)}return t}function be(e,t){return t+="@font-face { ",t=F(e,t),t+="}",t}function we(e,t,r){return r+=` @keyframes ${e[0].v.v[1]} { `,t&&t.forEach(s=>{const i=s.v[0].v.v[1],n=x(s.v[1]);switch(i){case"\u0639\u0646\u062F":const a=n[0],o=n[1].v||[];r=w(a,r),r+=" {",o.forEach(c=>{if(c.id==="named_tuple")c.v.forEach(u=>{const h=l(z(u[0].v[1])),k=x(u[1]);r+=` ${h} : `,r=w(k,r),r+="; "});else{const u=l(z(c[0].v[1])),h=x(c[1]);r+=` ${u} : `,r=w(h,r),r+="; "}}),r+="} ";break;default:_("unsupported element: "+p(i))}}),r+="}",r}export{B as CSS_str_en,x as CSS_value_en,D as write_ar_html,P as write_html};
